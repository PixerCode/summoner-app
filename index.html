<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Summoner Tracker</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#111">

<style>
  body {
    font-family: Arial, sans-serif;
    background: #111;
    color: white;
    display: flex;
    justify-content: center;
    padding: 20px;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    width: 300px;
  }

  .cell {
    background: #1c1c1c;
    border: 2px solid #333;
    border-radius: 10px;
    padding: 8px;
    text-align: center;
  }

  select {
    width: 100%;
    margin-bottom: 6px;
    font-size: 14px;
  }

  button {
    width: 100%;
    height: 50px;
    font-size: 18px;
    background: #222;
    color: white;
    border: 2px solid #444;
    border-radius: 8px;
    cursor: pointer;
  }

  button.active {
    background: #b30000;
    border-color: #ff4d4d;
  }
</style>
</head>

<body>

<div class="grid" id="grid"></div>

<script>
  // Service Worker
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js');
  }

  const grid = document.getElementById("grid");
  const timers = [];

  for (let i = 0; i < 10; i++) {
    const cell = document.createElement("div");
    cell.className = "cell";

    const select = document.createElement("select");
    select.innerHTML = `
      <option value="290">300s</option>
      <option value="230">240s</option>
      <option value="170">180s</option>
      <option value="244">250s</option>
      <option value="190">200s</option>
      <option value="142">148s</option>
    `;

    const button = document.createElement("button");
    button.textContent = "READY";

    timers.push({ interval: null });

    button.onclick = () => startTimer(i, button, select);

    cell.appendChild(select);
    cell.appendChild(button);
    grid.appendChild(cell);
  }

  function startTimer(index, button, select) {
    clearInterval(timers[index].interval);

    const duration = parseInt(select.value);
    const endTime = Date.now() + duration * 1000;

    button.classList.add("active");

    timers[index].interval = setInterval(() => {
      const remaining = Math.max(
        0,
        Math.floor((endTime - Date.now()) / 1000)
      );

      if (remaining === 0) {
        clearInterval(timers[index].interval);
        button.textContent = "READY";
        button.classList.remove("active");

        // ðŸ“³ VIBRACIÃ“N al terminar
        if (navigator.vibrate) {
          navigator.vibrate([200, 100, 200]);
        }

      } else {
        button.textContent = remaining + "s";
      }
    }, 1000);
  }
</script>

</body>
</html>
